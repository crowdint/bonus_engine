<div class="page-header">
  <h2>{{event.name}}
    <small class="pull-right">
      <a href="/cycles/{{cycleId}}/events">Back to list events</a>
      |
      <a href="/cycles/{{cycleId}}/events/{{eventId}}/me" >See my results</a>
    </small>
  </h2>
</div>


<ul class="list-inline" data-spy="affix" data-offset-top="280" >
  <li>
    <h4>Points to distribute: <em>{{event.budget}}</em></h4>

  </li>
  <li>
    <h4>Remaining Points: <em>{{remainingPoints}}</em></h4>
  </li>
  <li>
  <h5>You can assign between <em>{{event.minimum_points}}</em> and <em>{{event.maximum_points}} points.</em></h5>
  </li>

</ul>

<table class="table">
  <thead>
    <tr>
      <th colspan="2">
        Coworker
        <input type="text" ng-model="searchText" placeholder="Search a coworker">
      </th>
      <th>Points</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="point in points | filter:searchText">
      <td class="coworker-picture-td"><img class="coworker-picture img-circle" ng-src="{{point.receiver.picture_url}}"></td>
      <td><a href="/cycles/{{cycleId}}/events/{{eventId}}/users/{{point.receiver.id}}">{{point.receiver.name}}</td>
      <td>
        <input type="number" max='{{event.maximum_points}}' min='{{event.minimum_points}}' ng-model="point.quantity" ng-blur="pointChange(point)" ng-show="event.active" popover-placement="top" popover-trigger="openTrigger" popover-event popover="{{popoverMessage}}" popover-append-to-body="true">
        <span ng-hide="event.active">{{point.quantity}}</span>
      </td>
      <td class='message'>
        <p>{{point.message}}</p>
        </br>
        <a href="#" ng-click="setMessage(point)" ng-show="point.message.length > 0"> Edit</a>
      </td>
    </tr>
  </tbody>
</table>
